<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="mongodb aggregation commonly used for tasks such as filtering, grouping, sorting, and reshaping data within a MongoDB collection. ">
    <link rel="shortcut icon" href="../assets/favicon.png" type="image/x-icon">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="../assets/style.css">
    <link rel="stylesheet" href="../assets/prism.css">
    <title>MongoDB Aggregation Tutorial</title>
</head>
<body>
    <!--Navigation-->
    <nav class="navbar navbar-expand-lg bg-dark navbar-dark fixed-top" id="navs">
        <div class="container">
          <a href="../index.html" class="navbar-brand">Webstack Notes</a>
      
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navmenu"><span class="navbar-toggler-icon"></span> </button>
      
        </div>
        <div class="collapse navbar-collapse" id="navmenu">
          <ul class="navbar-nav">
            <li class="nav-item"><a href="../html/html-main-page.html" class="nav-link">HTML</a></li>
             <li class="nav-item"><a href="../java-script/javascript-main-page.html" class="nav-link">Java Script</a></li>
            <li class="nav-item"><a href="../react-js/react-main-page.html" class="nav-link">React JS</a></li>
            <li class="nav-item"><a href="../nodejs/nodejs-main-page.html" class="nav-link">Node JS</a></li>
            <li class="nav-item"><a href="../mongodb/mongodb-main-page.html" class="nav-link">MongoDB</a></li>
      
          </ul>
        </div>
      </nav>

      
    <!--Main Content-->


      <main>

       <div class="content">

        <h1>MongoDB Aggregation Tutorial</h1>
        <p>MongoDB Aggregation commonly used for tasks such as filtering, grouping, sorting, and reshaping data within a MongoDB collection. </p>        

        <h2>Aggregate Data</h2>
        <p>The MongoDB <strong> aggregate </strong> method to perform data aggregation in MongoDB.</p>
        <pre><code class="language-js">db.collection.aggregate(pipeline);
        </code></pre>

        <h2>Stages in Aggregation</h2>
        <p>Aggregation pipelines consist of multiple stages, each with a specific operation.</p>
        <pre><code class="language-js">db.sales.aggregate([
    { $match: { date: { $gte: ISODate("2022-01-01") } } },
    { $group: { _id: "$product", total: { $sum: "$quantity" } } }
  ]);
        </code></pre>

        <h2>$match Stage</h2>
        <p>Filters documents that meet specific criteria.</p>
        <pre><code class="language-js">{ $match: { category: "Electronics" } }
        </code></pre>

        <h2>$group Stage</h2>
        <p>Groups documents based on a specified key and performs aggregate operations.</p>
        <pre><code class="language-js">{ $group: { _id: "$city", totalSales: { $sum: "$sales" } } }</code></pre>


        <h2>$project Stage</h2>
        <p>Reshapes documents, including selecting fields and creating new ones.</p>
        <pre><code class="language-js">{ $project: { name: 1, totalSales: "$sales" } }
        </code></pre>

        <h2>$sort Stage</h2>
        <p>Sorts documents based on specified fields.</p>
        <pre><code class="language-js">{ $sort: { totalSales: -1 } } // Descending order
        </code></pre>

        <h2>$limit Stage</h2>
        <p>Limits the number of documents in the result.</p>
        <pre><code class="language-js">{ $limit: 10 }
        </code></pre>

        <h2>$skip Stage</h2>
        <p>Skips a specified number of documents in the result.</p>
        <pre><code class="language-js">{ $skip: 5 }
        </code></pre>

        <h2>$unwind Stage</h2>
        <p>Deconstructs arrays, creating a separate document for each element.
        </p>
        <pre><code class="language-js">{ $unwind: "$tags" }</code></pre>

        <h2>$lookup Stage</h2>
        <p>Performs a left outer join with another collection.</p>
        <pre><code class="language-js">{
  $lookup: {
    from: "orders",
    localField: "order_id",
    foreignField: "_id",
    as: "orderDetails"
  }
} </code></pre>

        <h2>$out Stage</h2>
        <p>Writes the results of the aggregation to a new collection.</p>
        <pre><code class="language-js">{ $out: "newCollection" }
        </code></pre>

        <h2>Aggregation Operators</h2>
        <p>The aggregation operators like $sum, $avg, $max, and $min within the $group stage for calculations.</p>
        <pre><code class="language-js">{ $group: { _id: "$category", maxPrice: { $max: "$price" } } }
        </code></pre>

        
        <div class="next-prev">
          <a href="./mongodb-query-operators.html" id="prev">Previous</a>
          <a href="./mongodb-mongoose.html" id="next">Next</a>
       </div>

       </div>


      </main>




    <footer>
        <h2><a href="../index.html" class="footer-brand">Webstack Notes</a></h2>
    
        <ul class="footer-links">
            <li><a href="../html/html-main-page.html">HTML</a></li>
             <li><a href="../java-script/javascript-main-page.html">JavaScript</a></li>
            <li><a href="../nodejs/nodejs-main-page.html">Node.js</a></li>
            <li><a href="../react-js/react-main-page.html">React JS</a></li>
            <li><a href="../mongodb/mongodb-main-page.html">Mongo DB</a></li>
        </ul>
    
        <div class="about">
            <ul>
                <li><a href="../about/privacy-policy.html">Privacy Policy</a></li>
                <li><a href="../about/terms-of-use.html">Terms of Use</a></li>
            </ul>
        </div>
    </footer>


<script src="../assets/prism.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
</body>
</html>